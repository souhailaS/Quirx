
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quirx Report</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f8f9fa; }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 20px; }
        .summary { background: #ffffff; padding: 20px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .metric { display: inline-block; margin: 8px; padding: 12px 16px; background: #f8f9fa; border-radius: 8px; min-width: 120px; text-align: center; }
        .metric strong { display: block; font-size: 1em; margin-bottom: 4px; }
        .metric span { font-size: 1.2em; }
        .equivalent { color: #28a745; border-left: 4px solid #28a745; }
        .minor { color: #ffc107; border-left: 4px solid #ffc107; }
        .deviation { color: #dc3545; border-left: 4px solid #dc3545; }
        .charts-section { background: #ffffff; padding: 20px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .charts-row { display: flex; flex-wrap: wrap; gap: 20px; }
        .chart-container { flex: 1; min-width: 300px; }
        .chart { width: 100%; height: 300px; }
        .config-section { background: #ffffff; padding: 20px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .results-section { background: #ffffff; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .result { border: 1px solid #e9ecef; margin: 15px 0; padding: 20px; border-radius: 8px; }
        .mutation-text { background: #f8f9fa; padding: 15px; border-left: 4px solid #007bff; margin: 15px 0; border-radius: 5px; }
        pre { white-space: pre-wrap; word-wrap: break-word; font-size: 0.9em; }
        h1 { color: #2c3e50; }
        h2 { color: #34495e; border-bottom: 2px solid #3498db; padding-bottom: 8px; margin-bottom: 15px; }
        h3 { color: #7f8c8d; margin-bottom: 10px; }
        @media (max-width: 768px) {
            .charts-row { flex-direction: column; }
            .metric { min-width: 100px; margin: 5px; padding: 8px 12px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Quirx Robustness Analysis Report</h1>
            <p style="color: #7f8c8d; font-size: 1.1em;"> Prompt Mutation Testing Results</p>
        </div>
        
        <div class="summary">
            <h2>Executive Summary</h2>
            <div style="display: flex; flex-wrap: wrap; justify-content: center;">
                <div class="metric">
                    <strong style="color: #3498db;">Robustness Score</strong>
                    <span style="font-size: 1.6em; color: #2c3e50;">0.90/1.00</span>
                </div>
                <div class="metric">
                    <strong style="color: #9b59b6;">Total Mutations</strong>
                    <span style="font-size: 1.6em; color: #2c3e50;">6</span>
                </div>
                <div class="metric equivalent">
                    <strong>Equivalent</strong>
                    <span>4 (66.7%)</span>
                </div>
                <div class="metric minor">
                    <strong>Minor Variations</strong>
                    <span>2 (33.3%)</span>
                </div>
                <div class="metric deviation">
                    <strong>Behavioral Deviations</strong>
                    <span>0 (0.0%)</span>
                </div>
            </div>
        </div>
        
        <div class="charts-section">
            <h2>Visual Analytics</h2>
            <div class="charts-row">
                <div class="chart-container">
                    <h3>Robustness Score</h3>
                    <div id="robustnessGauge" class="chart"></div>
                </div>
                
                <div class="chart-container">
                    <h3>Classification Distribution</h3>
                    <div id="classificationPie" class="chart"></div>
                </div>
                
                <div class="chart-container">
                    <h3>Mutation Type Performance</h3>
                    <div id="mutationTypeBar" class="chart"></div>
                </div>
            </div>
        </div>
        
        <div class="config-section">
            <h2>Configuration</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                <div><strong>Timestamp:</strong> 2025-07-23T23:08:28.605499</div>
                <div><strong>Prompt File:</strong> examples/prompt_sql.txt</div>
                <div><strong>Model:</strong> gpt-3.5-turbo</div>
                <div><strong>Input:</strong> Get all customers who have placed orders in the last 30 days</div>
            </div>
        </div>
        
        <div class="results-section">
            <h2>Detailed Results</h2>

            <div class="result equivalent">
                <h3>Mutation 1: Convert all text to uppercase</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 15px 0;">
                    <div><strong>Type:</strong> Lexical</div>
                    <div><strong>Severity:</strong> 0.10</div>
                    <div><strong>Classification:</strong> Equivalent</div>
                    <div><strong>Similarity:</strong> 0.990</div>
                </div>
                
                <div class="mutation-text">
                    <strong>Original:</strong><br>
                    <pre>You are a SQL expert. Generate a valid SQL query for the given request.

Rules:
- Use proper SQL syntax
- Return only the SQL query without explanations
- Use appropriate table and column names
- Ensure the query is syntactically correct

Request:

Get all customers who have placed orders in the last 30 days</pre>
                </div>
                
                <div class="mutation-text">
                    <strong>Mutated:</strong><br>
                    <pre>YOU ARE A SQL EXPERT. GENERATE A VALID SQL QUERY FOR THE GIVEN REQUEST.

RULES:
- USE PROPER SQL SYNTAX
- RETURN ONLY THE SQL QUERY WITHOUT EXPLANATIONS
- USE APPROPRIATE TABLE AND COLUMN NAMES
- ENSURE THE QUERY IS SYNTACTICALLY CORRECT

REQUEST:

GET ALL CUSTOMERS WHO HAVE PLACED ORDERS IN THE LAST 30 DAYS</pre>
                </div>
            </div>

            <div class="result equivalent">
                <h3>Mutation 2: Convert all text to uppercase</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 15px 0;">
                    <div><strong>Type:</strong> Lexical</div>
                    <div><strong>Severity:</strong> 0.10</div>
                    <div><strong>Classification:</strong> Equivalent</div>
                    <div><strong>Similarity:</strong> 0.977</div>
                </div>
                
                <div class="mutation-text">
                    <strong>Original:</strong><br>
                    <pre>You are a SQL expert. Generate a valid SQL query for the given request.

Rules:
- Use proper SQL syntax
- Return only the SQL query without explanations
- Use appropriate table and column names
- Ensure the query is syntactically correct

Request:

Get all customers who have placed orders in the last 30 days</pre>
                </div>
                
                <div class="mutation-text">
                    <strong>Mutated:</strong><br>
                    <pre>YOU ARE A SQL EXPERT. GENERATE A VALID SQL QUERY FOR THE GIVEN REQUEST.

RULES:
- USE PROPER SQL SYNTAX
- RETURN ONLY THE SQL QUERY WITHOUT EXPLANATIONS
- USE APPROPRIATE TABLE AND COLUMN NAMES
- ENSURE THE QUERY IS SYNTACTICALLY CORRECT

REQUEST:

GET ALL CUSTOMERS WHO HAVE PLACED ORDERS IN THE LAST 30 DAYS</pre>
                </div>
            </div>

            <div class="result equivalent">
                <h3>Mutation 3: Randomly reorder sentences</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 15px 0;">
                    <div><strong>Type:</strong> Structural</div>
                    <div><strong>Severity:</strong> 0.60</div>
                    <div><strong>Classification:</strong> Equivalent</div>
                    <div><strong>Similarity:</strong> 1.000</div>
                </div>
                
                <div class="mutation-text">
                    <strong>Original:</strong><br>
                    <pre>You are a SQL expert. Generate a valid SQL query for the given request.

Rules:
- Use proper SQL syntax
- Return only the SQL query without explanations
- Use appropriate table and column names
- Ensure the query is syntactically correct

Request:

Get all customers who have placed orders in the last 30 days</pre>
                </div>
                
                <div class="mutation-text">
                    <strong>Mutated:</strong><br>
                    <pre>You are a SQL expert. Generate a valid SQL query for the given request. Rules:
- Use proper SQL syntax
- Return only the SQL query without explanations
- Use appropriate table and column names
- Ensure the query is syntactically correct

Request:

Get all customers who have placed orders in the last 30 days</pre>
                </div>
            </div>

            <div class="result equivalent">
                <h3>Mutation 4: Randomly reorder sentences</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 15px 0;">
                    <div><strong>Type:</strong> Structural</div>
                    <div><strong>Severity:</strong> 0.60</div>
                    <div><strong>Classification:</strong> Equivalent</div>
                    <div><strong>Similarity:</strong> 0.977</div>
                </div>
                
                <div class="mutation-text">
                    <strong>Original:</strong><br>
                    <pre>You are a SQL expert. Generate a valid SQL query for the given request.

Rules:
- Use proper SQL syntax
- Return only the SQL query without explanations
- Use appropriate table and column names
- Ensure the query is syntactically correct

Request:

Get all customers who have placed orders in the last 30 days</pre>
                </div>
                
                <div class="mutation-text">
                    <strong>Mutated:</strong><br>
                    <pre>Rules:
- Use proper SQL syntax
- Return only the SQL query without explanations
- Use appropriate table and column names
- Ensure the query is syntactically correct

Request:

Get all customers who have placed orders in the last 30 days You are a SQL expert. Generate a valid SQL query for the given request.</pre>
                </div>
            </div>

            <div class="result minor_variation">
                <h3>Mutation 5: Reverse sentence order</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 15px 0;">
                    <div><strong>Type:</strong> Structural</div>
                    <div><strong>Severity:</strong> 0.50</div>
                    <div><strong>Classification:</strong> Minor Variation</div>
                    <div><strong>Similarity:</strong> 0.781</div>
                </div>
                
                <div class="mutation-text">
                    <strong>Original:</strong><br>
                    <pre>You are a SQL expert. Generate a valid SQL query for the given request.

Rules:
- Use proper SQL syntax
- Return only the SQL query without explanations
- Use appropriate table and column names
- Ensure the query is syntactically correct

Request:

Get all customers who have placed orders in the last 30 days</pre>
                </div>
                
                <div class="mutation-text">
                    <strong>Mutated:</strong><br>
                    <pre>Rules:
- Use proper SQL syntax
- Return only the SQL query without explanations
- Use appropriate table and column names
- Ensure the query is syntactically correct

Request:

Get all customers who have placed orders in the last 30 days Generate a valid SQL query for the given request. You are a SQL expert.</pre>
                </div>
            </div>

            <div class="result minor_variation">
                <h3>Mutation 6: Reverse sentence order</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 15px 0;">
                    <div><strong>Type:</strong> Structural</div>
                    <div><strong>Severity:</strong> 0.50</div>
                    <div><strong>Classification:</strong> Minor Variation</div>
                    <div><strong>Similarity:</strong> 0.913</div>
                </div>
                
                <div class="mutation-text">
                    <strong>Original:</strong><br>
                    <pre>You are a SQL expert. Generate a valid SQL query for the given request.

Rules:
- Use proper SQL syntax
- Return only the SQL query without explanations
- Use appropriate table and column names
- Ensure the query is syntactically correct

Request:

Get all customers who have placed orders in the last 30 days</pre>
                </div>
                
                <div class="mutation-text">
                    <strong>Mutated:</strong><br>
                    <pre>Rules:
- Use proper SQL syntax
- Return only the SQL query without explanations
- Use appropriate table and column names
- Ensure the query is syntactically correct

Request:

Get all customers who have placed orders in the last 30 days Generate a valid SQL query for the given request. You are a SQL expert.</pre>
                </div>
            </div>

        </div>
    </div>
    
    <script>
        // Robustness Score Gauge
        var robustnessChart = echarts.init(document.getElementById('robustnessGauge'));
        var robustnessOption = {
            tooltip: {
                formatter: '{a} <br/>{b} : {c}%'
            },
            series: [
                {
                    name: 'Robustness',
                    type: 'gauge',
                    startAngle: 180,
                    endAngle: 0,
                    center: ['50%', '75%'],
                    radius: '90%',
                    min: 0,
                    max: 1,
                    splitNumber: 8,
                    axisLine: {
                        lineStyle: {
                            width: 6,
                            color: [
                                [0.3, '#ff4757'],
                                [0.7, '#ffa502'],
                                [1, '#2ed573']
                            ]
                        }
                    },
                    pointer: {
                        icon: 'path://M12.8,0.7l12,40.1H0.7L12.8,0.7z',
                        length: '12%',
                        width: 20,
                        offsetCenter: [0, '-60%'],
                        itemStyle: {
                            color: 'auto'
                        }
                    },
                    axisTick: {
                        length: 12,
                        lineStyle: {
                            color: 'auto',
                            width: 2
                        }
                    },
                    splitLine: {
                        length: 20,
                        lineStyle: {
                            color: 'auto',
                            width: 5
                        }
                    },
                    axisLabel: {
                        color: '#464646',
                        fontSize: 16,
                        distance: -50,
                        formatter: function (value) {
                            return value.toFixed(1);
                        }
                    },
                    title: {
                        offsetCenter: [0, '-20%'],
                        fontSize: 16
                    },
                    detail: {
                        fontSize: 24,
                        offsetCenter: [0, '-35%'],
                        valueAnimation: true,
                        formatter: function (value) {
                            return Math.round(value * 100) + '%';
                        },
                        color: 'auto'
                    },
                    data: [
                        {
                            value: 0.900,
                            name: 'Score'
                        }
                    ]
                }
            ]
        };
        robustnessChart.setOption(robustnessOption);
        
        // Classification Pie Chart
        var pieChart = echarts.init(document.getElementById('classificationPie'));
        var pieOption = {
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b}: {c} ({d}%)'
            },
            legend: {
                orient: 'horizontal',
                bottom: '0%',
                left: 'center'
            },
            series: [
                {
                    name: 'Classifications',
                    type: 'pie',
                    radius: ['30%', '60%'],
                    center: ['50%', '45%'],
                    data: [{"value": 4, "name": "Equivalent"}, {"value": 2, "name": "Minor Variations"}, {"value": 0, "name": "Behavioral Deviations"}],
                    itemStyle: {
                        borderRadius: 8,
                        borderColor: '#fff',
                        borderWidth: 2
                    },
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    },
                    color: ['#2ed573', '#ffa502', '#ff4757']
                }
            ]
        };
        pieChart.setOption(pieOption);
        
        // Mutation Type Bar Chart
        var barChart = echarts.init(document.getElementById('mutationTypeBar'));
        var barOption = {
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                }
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis: [
                {
                    type: 'category',
                    data: ["Lexical", "Structural"],
                    axisTick: {
                        alignWithLabel: true
                    },
                    axisLabel: {
                        fontSize: 12
                    }
                }
            ],
            yAxis: [
                {
                    type: 'value',
                    max: 1,
                    axisLabel: {
                        formatter: '{value}',
                        fontSize: 12
                    }
                }
            ],
            series: [
                {
                    name: 'Average Similarity',
                    type: 'bar',
                    barWidth: '60%',
                    data: [0.9837021835748252, 0.9177041783262749],
                    itemStyle: {
                        borderRadius: [4, 4, 0, 0],
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                            { offset: 0, color: '#83bff6' },
                            { offset: 0.5, color: '#188df0' },
                            { offset: 1, color: '#188df0' }
                        ])
                    }
                }
            ]
        };
        barChart.setOption(barOption);
        
        // Make charts responsive
        window.addEventListener('resize', function() {
            robustnessChart.resize();
            pieChart.resize();
            barChart.resize();
        });
    </script>
</body>
</html>
